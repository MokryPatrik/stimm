%% Conversation Turn Sequence
sequenceDiagram
    participant Client as Web Client
    participant Voicebot as Voicebot App
    participant STT as STT Provider
    participant RAG as RAG Service
    participant LLM as LLM Provider
    participant TTS as TTS Provider

    Client->>Voicebot: 1. Stream PCM frames
    Voicebot->>STT: 2. Forward audio chunks
    STT-->>Voicebot: 3. Interim / final transcripts
    Voicebot-->>Client: 4. Transcripts over WebSocket
    Voicebot->>RAG: 5. Query (text, conversation id)
    RAG-->>Voicebot: 6. Context snippets + history
    Voicebot->>LLM: 7. Stream completion request
    LLM-->>Voicebot: 8. Token deltas (SSE)
    Voicebot->>TTS: 9. Sentence chunks for synthesis
    TTS-->>Client: 10. Audio chunks (WAV)
    Voicebot->>RAG: 11. Append assistant turn
    Voicebot-->>Client: 12. Status polling updates
